var Bt=Object.defineProperty,At=Object.defineProperties;var kt=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable;var vt=(r,s,t)=>s in r?Bt(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,St=(r,s)=>{for(var t in s||(s={}))gt.call(s,t)&&vt(r,t,s[t]);if(U)for(var t of U(s))Et.call(s,t)&&vt(r,t,s[t]);return r},bt=(r,s)=>At(r,kt(s));var Pt=(r,s)=>{var t={};for(var u in r)gt.call(r,u)&&s.indexOf(u)<0&&(t[u]=r[u]);if(r!=null&&U)for(var u of U(r))s.indexOf(u)<0&&Et.call(r,u)&&(t[u]=r[u]);return t};import*as n from"react";function ht(r){let s=setTimeout(r,0),t=setTimeout(r,10),u=setTimeout(r,50);return[s,t,u]}import*as Z from"react";function _t(r){let s=Z.useRef();return Z.useEffect(()=>{s.current=r}),s.current}import*as E from"react";var Ot=18,wt=40,Gt=`${wt}px`,xt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Tt({containerRef:r,inputRef:s,pushPasswordManagerStrategy:t,isFocused:u}){let[P,D]=E.useState(!1),[G,H]=E.useState(!1),[z,W]=E.useState(!1),q=E.useMemo(()=>t==="none"?!1:(t==="increase-width"||t==="experimental-no-flickering")&&P&&G,[P,G,t]),T=E.useCallback(()=>{let f=r.current,h=s.current;if(!f||!h||z||t==="none")return;let a=f,B=a.getBoundingClientRect().left+a.offsetWidth,A=a.getBoundingClientRect().top+a.offsetHeight/2,V=B-Ot,K=A;document.querySelectorAll(xt).length===0&&document.elementFromPoint(V,K)===f||(D(!0),W(!0))},[r,s,z,t]);return E.useEffect(()=>{let f=r.current;if(!f||t==="none")return;function h(){let A=window.innerWidth-f.getBoundingClientRect().right;H(A>=wt)}h();let a=setInterval(h,1e3);return()=>{clearInterval(a)}},[r,t]),E.useEffect(()=>{let f=u||document.activeElement===s.current;if(t==="none"||!f)return;let h=setTimeout(T,0),a=setTimeout(T,2e3),B=setTimeout(T,5e3),A=setTimeout(()=>{W(!0)},6e3);return()=>{clearTimeout(h),clearTimeout(a),clearTimeout(B),clearTimeout(A)}},[s,u,t,T]),{hasPWMBadge:P,willPushPWMBadge:q,PWM_BADGE_SPACE_WIDTH:Gt}}var jt=n.createContext({}),Lt=n.forwardRef((A,B)=>{var V=A,{value:r,onChange:s,maxLength:t,textAlign:u="left",pattern:P,placeholder:D,inputMode:G="numeric",onComplete:H,pushPasswordManagerStrategy:z="increase-width",pasteTransformer:W,containerClassName:q,noScriptCSSFallback:T=Nt,render:f,children:h}=V,a=Pt(V,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);var Y,ut,dt,ft,mt;let[K,ot]=n.useState(typeof a.defaultValue=="string"?a.defaultValue:""),i=r!=null?r:K,I=_t(i),x=n.useCallback(o=>{s==null||s(o),ot(o)},[s]),m=n.useMemo(()=>P?typeof P=="string"?new RegExp(P):P:null,[P]),l=n.useRef(null),J=n.useRef(null),Q=n.useRef({value:i,onChange:x,isIOS:typeof window!="undefined"&&((ut=(Y=window==null?void 0:window.CSS)==null?void 0:Y.supports)==null?void 0:ut.call(Y,"-webkit-touch-callout","none"))}),X=n.useRef({prev:[(dt=l.current)==null?void 0:dt.selectionStart,(ft=l.current)==null?void 0:ft.selectionEnd,(mt=l.current)==null?void 0:mt.selectionDirection]});n.useImperativeHandle(B,()=>l.current,[]),n.useEffect(()=>{let o=l.current,e=J.current;if(!o||!e)return;Q.current.value!==o.value&&Q.current.onChange(o.value),X.current.prev=[o.selectionStart,o.selectionEnd,o.selectionDirection];function d(){if(document.activeElement!==o){L(null),N(null);return}let c=o.selectionStart,b=o.selectionEnd,$=o.selectionDirection,R=o.maxLength,C=o.value,_=X.current.prev,v=-1,g=-1,w;if(C.length!==0&&c!==null&&b!==null){let Dt=c===b,Ht=c===C.length&&C.length<R;if(Dt&&!Ht){let y=c;if(y===0)v=0,g=1,w="forward";else if(y===R)v=y-1,g=y,w="backward";else if(R>1&&C.length>1){let nt=0;if(_[0]!==null&&_[1]!==null){w=y<_[1]?"backward":"forward";let Wt=_[0]===_[1]&&_[0]<R;w==="backward"&&!Wt&&(nt=-1)}v=nt+y,g=nt+y+1}}v!==-1&&g!==-1&&v!==g&&l.current.setSelectionRange(v,g,w)}let pt=v!==-1?v:c,Rt=g!==-1?g:b,yt=w!=null?w:$;L(pt),N(Rt),X.current.prev=[pt,Rt,yt]}if(document.addEventListener("selectionchange",d,{capture:!0}),d(),document.activeElement===o&&tt(!0),!document.getElementById("input-otp-style")){let c=document.createElement("style");if(c.id="input-otp-style",document.head.appendChild(c),c.sheet){let b="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";F(c.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),F(c.sheet,`[data-input-otp]:autofill { ${b} }`),F(c.sheet,`[data-input-otp]:-webkit-autofill { ${b} }`),F(c.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),F(c.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let S=()=>{e&&e.style.setProperty("--root-height",`${o.clientHeight}px`)};S();let p=new ResizeObserver(S);return p.observe(o),()=>{document.removeEventListener("selectionchange",d,{capture:!0}),p.disconnect()}},[]);let[rt,st]=n.useState(!1),[j,tt]=n.useState(!1),[M,L]=n.useState(null),[k,N]=n.useState(null);n.useEffect(()=>{let o=ht(()=>{var p,c,b,$;(p=l.current)==null||p.dispatchEvent(new Event("input"));let e=(c=l.current)==null?void 0:c.selectionStart,d=(b=l.current)==null?void 0:b.selectionEnd,S=($=l.current)==null?void 0:$.selectionDirection;e!==null&&d!==null&&(L(e),N(d),X.current.prev=[e,d,S])});return()=>{o.forEach(e=>clearTimeout(e))}},[i,j]),n.useEffect(()=>{I!==void 0&&i!==I&&I.length<t&&i.length===t&&(H==null||H(i))},[t,H,I,i]);let O=Tt({containerRef:J,inputRef:l,pushPasswordManagerStrategy:z,isFocused:j}),at=n.useCallback(o=>{let e=o.currentTarget.value.slice(0,t);if(e.length>0&&m&&!m.test(e)){o.preventDefault();return}typeof I=="string"&&e.length<I.length&&document.dispatchEvent(new Event("selectionchange")),x(e)},[t,x,I,m]),ct=n.useCallback(()=>{var o;if(l.current){let e=Math.min(l.current.value.length,t-1),d=l.current.value.length;(o=l.current)==null||o.setSelectionRange(e,d),L(e),N(d)}tt(!0)},[t]),it=n.useCallback(o=>{var v,g;let e=l.current;if(!W&&(!Q.current.isIOS||!o.clipboardData||!e))return;let d=o.clipboardData.getData("text/plain"),S=W?W(d):d;o.preventDefault();let p=(v=l.current)==null?void 0:v.selectionStart,c=(g=l.current)==null?void 0:g.selectionEnd,R=(p!==c?i.slice(0,p)+S+i.slice(c):i.slice(0,p)+S+i.slice(p)).slice(0,t);if(R.length>0&&m&&!m.test(R))return;e.value=R,x(R);let C=Math.min(R.length,t-1),_=R.length;e.setSelectionRange(C,_),L(C),N(_)},[t,x,m,i]),It=n.useMemo(()=>({position:"relative",cursor:a.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[a.disabled]),lt=n.useMemo(()=>({position:"absolute",inset:0,width:O.willPushPWMBadge?`calc(100% + ${O.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:O.willPushPWMBadge?`inset(0 ${O.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:u,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[O.PWM_BADGE_SPACE_WIDTH,O.willPushPWMBadge,u]),Mt=n.useMemo(()=>n.createElement("input",bt(St({autoComplete:a.autoComplete||"one-time-code"},a),{"data-input-otp":!0,"data-input-otp-placeholder-shown":i.length===0||void 0,"data-input-otp-mss":M,"data-input-otp-mse":k,inputMode:G,pattern:m==null?void 0:m.source,"aria-placeholder":D,style:lt,maxLength:t,value:i,ref:l,onPaste:o=>{var e;it(o),(e=a.onPaste)==null||e.call(a,o)},onChange:at,onMouseOver:o=>{var e;st(!0),(e=a.onMouseOver)==null||e.call(a,o)},onMouseLeave:o=>{var e;st(!1),(e=a.onMouseLeave)==null||e.call(a,o)},onFocus:o=>{var e;ct(),(e=a.onFocus)==null||e.call(a,o)},onBlur:o=>{var e;tt(!1),(e=a.onBlur)==null||e.call(a,o)}})),[at,ct,it,G,lt,t,k,M,a,m==null?void 0:m.source,i]),et=n.useMemo(()=>({slots:Array.from({length:t}).map((o,e)=>{var c;let d=j&&M!==null&&k!==null&&(M===k&&e===M||e>=M&&e<k),S=i[e]!==void 0?i[e]:null,p=i[0]!==void 0?null:(c=D==null?void 0:D[e])!=null?c:null;return{char:S,placeholderChar:p,isActive:d,hasFakeCaret:d&&S===null}}),isFocused:j,isHovering:!a.disabled&&rt}),[j,rt,t,k,M,a.disabled,i]),Ct=n.useMemo(()=>f?f(et):n.createElement(jt.Provider,{value:et},h),[h,et,f]);return n.createElement(n.Fragment,null,T!==null&&n.createElement("noscript",null,n.createElement("style",null,T)),n.createElement("div",{ref:J,"data-input-otp-container":!0,style:It,className:q},Ct,n.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Mt)))});Lt.displayName="Input";function F(r,s){try{r.insertRule(s)}catch(t){console.error("input-otp could not insert CSS rule:",s)}}var Nt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;var Kt="^\\d+$",Jt="^[a-zA-Z]+$",Qt="^[a-zA-Z0-9]+$";export{Lt as OTPInput,jt as OTPInputContext,Jt as REGEXP_ONLY_CHARS,Kt as REGEXP_ONLY_DIGITS,Qt as REGEXP_ONLY_DIGITS_AND_CHARS};
//# sourceMappingURL=index.mjs.map